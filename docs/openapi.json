{"openapi":"3.1.0","info":{"title":"Open Labels Initiative: Label Pool API","version":"0.1.0"},"paths":{"/attestation":{"post":{"summary":"Post Single Attestation","operationId":"post_single_attestation_attestation_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttestationPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SingleAttestationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/attestations/bulk":{"post":{"summary":"Post Bulk Attestations","operationId":"post_bulk_attestations_attestations_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkAttestationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkAttestationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/labels":{"get":{"tags":["Protected"],"summary":"Get Labels","description":"Return labels (key/value) for a given address. By default, only the newest per (chain_id, attester, tag_id).","operationId":"get_labels_labels_get","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"address","in":"query","required":true,"schema":{"type":"string","description":"Address (0x...)","title":"Address"},"description":"Address (0x...)"},{"name":"chain_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional chain_id filter","title":"Chain Id"},"description":"Optional chain_id filter"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"description":"Max number of labels to return","default":100,"title":"Limit"},"description":"Max number of labels to return"},{"name":"include_all","in":"query","required":false,"schema":{"type":"boolean","description":"If false (default), return only the latest label per (chain_id, attester, tag_id)","default":false,"title":"Include All"},"description":"If false (default), return only the latest label per (chain_id, attester, tag_id)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/labels/bulk":{"post":{"tags":["Protected"],"summary":"Get Labels Bulk","operationId":"get_labels_bulk_labels_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkLabelsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkLabelsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/addresses/search":{"get":{"tags":["Protected"],"summary":"Search Addresses By Tag","description":"Return all addresses that have a specific tag_id=tag_value pair.","operationId":"search_addresses_by_tag_addresses_search_get","parameters":[{"name":"tag_id","in":"query","required":true,"schema":{"type":"string","description":"The tag key, e.g. 'usage_category'","title":"Tag Id"},"description":"The tag key, e.g. 'usage_category'"},{"name":"tag_value","in":"query","required":true,"schema":{"type":"string","description":"The tag value, e.g. 'dex'","title":"Tag Value"},"description":"The tag value, e.g. 'dex'"},{"name":"chain_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional chain_id filter, e.g. 'eip155:8453'","title":"Chain Id"},"description":"Optional chain_id filter, e.g. 'eip155:8453'"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max number of addresses to return","default":100,"title":"Limit"},"description":"Max number of addresses to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/attestations":{"get":{"summary":"Get Attestations","description":"Return raw attestations from storage.\n\nBehavior:\n- If `uid` is provided: return only that attestation (ignore other filters, limit=1).\n- Else: filter by any combination of {attester, recipient, schema_info, since}.\n- Results ordered by time (desc by default).","operationId":"get_attestations_attestations_get","parameters":[{"name":"uid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by specific attestation UID (0x...)","title":"Uid"},"description":"Filter by specific attestation UID (0x...)"},{"name":"attester","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by attester address (0x...)","title":"Attester"},"description":"Filter by attester address (0x...)"},{"name":"recipient","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by recipient address (0x...)","title":"Recipient"},"description":"Filter by recipient address (0x...)"},{"name":"schema_info","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by schema_info (e.g. '8453__0xabc...')","title":"Schema Info"},"description":"Filter by schema_info (e.g. '8453__0xabc...')"},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Return only attestations created after this timestamp (ISO8601 or Unix seconds)","title":"Since"},"description":"Return only attestations created after this timestamp (ISO8601 or Unix seconds)"},{"name":"order","in":"query","required":false,"schema":{"enum":["asc","desc"],"type":"string","description":"Order results by attestation time (asc or desc). Default: desc","default":"desc","title":"Order"},"description":"Order results by attestation time (asc or desc). Default: desc"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max number of attestations to return","default":30,"title":"Limit"},"description":"Max number of attestations to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttestationQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/attesters":{"get":{"tags":["Protected"],"summary":"Get Attester Analytics","description":"Analytics summary: group by attester, count number of labels and unique attestations.","operationId":"get_attester_analytics_analytics_attesters_get","parameters":[{"name":"chain_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional chain_id filter, e.g. 'eip155:8453'","title":"Chain Id"},"description":"Optional chain_id filter, e.g. 'eip155:8453'"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of rows to return","default":20,"title":"Limit"},"description":"Number of rows to return"},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","pattern":"^(tags|attestations)$","description":"Order by 'tags' (default) or 'attestations'","default":"tags","title":"Order By"},"description":"Order by 'tags' (default) or 'attestations'"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttesterAnalyticsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AddressLabels":{"properties":{"address":{"type":"string","title":"Address"},"labels":{"items":{"$ref":"#/components/schemas/LabelItem"},"type":"array","title":"Labels"}},"type":"object","required":["address","labels"],"title":"AddressLabels"},"AddressWithLabel":{"properties":{"address":{"type":"string","title":"Address"},"chain_id":{"type":"string","title":"Chain Id"},"time":{"type":"string","format":"date-time","title":"Time"},"attester":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Attester"}},"type":"object","required":["address","chain_id","time","attester"],"title":"AddressWithLabel"},"AttestationDomain":{"properties":{"name":{"type":"string","title":"Name"},"chainId":{"type":"string","title":"Chainid"},"version":{"type":"string","title":"Version"},"verifyingContract":{"type":"string","title":"Verifyingcontract"}},"type":"object","required":["name","chainId","version","verifyingContract"],"title":"AttestationDomain"},"AttestationMessage":{"properties":{"version":{"type":"integer","title":"Version"},"schema":{"type":"string","title":"Schema"},"recipient":{"type":"string","title":"Recipient"},"time":{"type":"string","title":"Time"},"expirationTime":{"type":"string","title":"Expirationtime"},"revocable":{"type":"boolean","title":"Revocable"},"refUID":{"type":"string","title":"Refuid"},"data":{"type":"string","title":"Data"},"salt":{"type":"string","title":"Salt"}},"type":"object","required":["version","schema","recipient","time","expirationTime","revocable","refUID","data","salt"],"title":"AttestationMessage"},"AttestationPayload":{"properties":{"sig":{"$ref":"#/components/schemas/AttestationSig"},"signer":{"type":"string","title":"Signer"}},"type":"object","required":["sig","signer"],"title":"AttestationPayload"},"AttestationQueryResponse":{"properties":{"count":{"type":"integer","title":"Count"},"attestations":{"items":{"$ref":"#/components/schemas/AttestationRecord"},"type":"array","title":"Attestations"}},"type":"object","required":["count","attestations"],"title":"AttestationQueryResponse"},"AttestationRecord":{"properties":{"uid":{"type":"string","title":"Uid"},"time":{"type":"string","format":"date-time","title":"Time"},"chain_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chain Id"},"attester":{"type":"string","title":"Attester"},"recipient":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recipient"},"revoked":{"type":"boolean","title":"Revoked"},"is_offchain":{"type":"boolean","title":"Is Offchain"},"ipfs_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ipfs Hash"},"schema_info":{"type":"string","title":"Schema Info"},"tags_json":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Tags Json"}},"type":"object","required":["uid","time","chain_id","attester","recipient","revoked","is_offchain","ipfs_hash","schema_info","tags_json"],"title":"AttestationRecord"},"AttestationSig":{"properties":{"uid":{"type":"string","title":"Uid"},"types":{"$ref":"#/components/schemas/AttestationTypes"},"domain":{"$ref":"#/components/schemas/AttestationDomain"},"message":{"$ref":"#/components/schemas/AttestationMessage"},"version":{"type":"integer","title":"Version"},"signature":{"$ref":"#/components/schemas/AttestationSignatureFields"},"primaryType":{"type":"string","title":"Primarytype"}},"type":"object","required":["uid","types","domain","message","version","signature","primaryType"],"title":"AttestationSig"},"AttestationSignatureFields":{"properties":{"r":{"type":"string","title":"R"},"s":{"type":"string","title":"S"},"v":{"type":"integer","title":"V"}},"type":"object","required":["r","s","v"],"title":"AttestationSignatureFields"},"AttestationTypes":{"properties":{"Attest":{"items":{"$ref":"#/components/schemas/AttestationTypesField"},"type":"array","title":"Attest"}},"type":"object","required":["Attest"],"title":"AttestationTypes"},"AttestationTypesField":{"properties":{"name":{"type":"string","title":"Name"},"type":{"type":"string","title":"Type"}},"type":"object","required":["name","type"],"title":"AttestationTypesField"},"AttesterAnalytics":{"properties":{"attester":{"type":"string","title":"Attester"},"label_count":{"type":"integer","title":"Label Count"},"unique_attestations":{"type":"integer","title":"Unique Attestations"}},"type":"object","required":["attester","label_count","unique_attestations"],"title":"AttesterAnalytics"},"AttesterAnalyticsResponse":{"properties":{"count":{"type":"integer","title":"Count"},"results":{"items":{"$ref":"#/components/schemas/AttesterAnalytics"},"type":"array","title":"Results"}},"type":"object","required":["count","results"],"title":"AttesterAnalyticsResponse"},"BulkAttestationRequest":{"properties":{"attestations":{"items":{"$ref":"#/components/schemas/AttestationPayload"},"type":"array","maxItems":1000,"minItems":1,"title":"Attestations"}},"type":"object","required":["attestations"],"title":"BulkAttestationRequest"},"BulkAttestationResponse":{"properties":{"accepted":{"type":"integer","title":"Accepted"},"duplicates":{"type":"integer","title":"Duplicates"},"failed_validation":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Failed Validation"},"status":{"type":"string","title":"Status","default":"queued"}},"type":"object","required":["accepted","duplicates","failed_validation"],"title":"BulkAttestationResponse"},"BulkLabelsRequest":{"properties":{"addresses":{"items":{"type":"string"},"type":"array","maxItems":100,"minItems":1,"title":"Addresses"},"chain_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chain Id","description":"Optional chain_id filter, e.g. 'eip155:8453'"},"limit_per_address":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Limit Per Address","description":"Max labels to return per address in the response","default":50},"include_all":{"type":"boolean","title":"Include All","default":false}},"type":"object","required":["addresses"],"title":"BulkLabelsRequest"},"BulkLabelsResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/AddressLabels"},"type":"array","title":"Results"}},"type":"object","required":["results"],"title":"BulkLabelsResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LabelItem":{"properties":{"tag_id":{"type":"string","title":"Tag Id"},"tag_value":{"type":"string","title":"Tag Value"},"chain_id":{"type":"string","title":"Chain Id"},"time":{"type":"string","format":"date-time","title":"Time"},"attester":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Attester"}},"type":"object","required":["tag_id","tag_value","chain_id","time","attester"],"title":"LabelItem"},"LabelSearchResponse":{"properties":{"tag_id":{"type":"string","title":"Tag Id"},"tag_value":{"type":"string","title":"Tag Value"},"count":{"type":"integer","title":"Count"},"results":{"items":{"$ref":"#/components/schemas/AddressWithLabel"},"type":"array","title":"Results"}},"type":"object","required":["tag_id","tag_value","count","results"],"title":"LabelSearchResponse"},"LabelsResponse":{"properties":{"address":{"type":"string","title":"Address"},"count":{"type":"integer","title":"Count"},"labels":{"items":{"$ref":"#/components/schemas/LabelItem"},"type":"array","title":"Labels"}},"type":"object","required":["address","count","labels"],"title":"LabelsResponse"},"SingleAttestationResponse":{"properties":{"uid":{"type":"string","title":"Uid"},"status":{"type":"string","title":"Status","default":"queued"}},"type":"object","required":["uid"],"title":"SingleAttestationResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"x-api-key"}}}}